# Whether the plugin is enabled, if this is 0 then none of the other configuration settings do anything
enabled = 1

# Whether to assign relationships on creation of a new object
process_on_insert = 1

# Whether to assign relationships on modification of an existing object
process_on_update = 1

# Whether to add any relationships where the rule matches, but the relationship does not already exist; this should
# normally be true
add_matched = 1

# Whether to remove any existing relationships of a type that is described by a trigger rule below
remove_unmatched = 1

# Whether to use notifications to inform the user when relationships are added or removed by this plugin
notify = 1

# How to match fields with multiple values, either "all" (every value must match the rule for it to be considered a
# match) or "any" (a single matching value constitutes a match) or "single" (the value is concatenated into a single
# string which is matched against the pattern); this may be overridden by the optional `match_mode` per-rule key
default_match_mode = any

# Delimiter when `match_mode` (or implicit mode set by `default_match_mode`) is set to "single"; this value may be
# overridden by the optional `value_delimiter` per-rule key; ignored for other match modes
default_value_delimiter = ;

# Rules describing how relationships are generated
# TODO These rules should be in app/conf/local, put some generic examples here
rules = {
	0 = {
		source_tables = [ ca_objects ],
		trigger_template = ^ca_objects.individualCount,
		trigger_value_patterns = [ "/^1$/" ],
		related_table = ca_collections,
		related_record = single,
		relationship_type = part
	},
	1 = {
		source_tables = [ ca_objects ],
		trigger_template = ^ca_objects.individualCount,
		trigger_value_patterns = [ "/^[2-9]|\d{2,}$/" ],
		related_table = ca_collections,
		related_record = many,
		relationship_type = part
	},
	2 = {
		source_tables = [ ca_objects ],
		trigger_template = ^ca_objects.individualCount,
		trigger_value_patterns = [ "/[^\d]/" ],
		related_table = ca_collections,
		related_record = xx,
		relationship_type = part
	}
}


#	0 = {
#		source_tables = [ ca_objects ],
#		trigger_template = ^ca_objects.type_id,
#		trigger_values = [ zoology, spider ],
#		related_table = ca_collections,
#		related_record = arachnida,
#		relationship_type = belongs_to
#	}
