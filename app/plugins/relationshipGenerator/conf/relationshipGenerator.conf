# Whether the plugin is enabled, if this is 0 then none of the other configuration settings do anything
enabled = 1

# Whether to assign relationships on creation of a new object
process_on_insert = 1

# Whether to assign relationships on modification of an existing object
process_on_update = 1

# Whether to add any relationships where the rule matches, but the relationship does not already exist; this should normally be true
add_matched = 1

# Whether to remove any existing relationships of a type that is described by a trigger rule below
remove_unmatched = 1

# Rules describing how relationships are generated
# TODO These rules should be in app/conf/local, put some generic examples here
rules = {
	0 = {
		source_tables = [ ca_objects ],
		trigger_template = ^ca_objects.individualCount,
		trigger_value_patterns = [ "/^1$/" ],
		related_table = ca_collections,
		related_record = si,
		relationship_type = part
	},
	1 = {
		source_tables = [ ca_objects ],
		trigger_template = ^ca_objects.individualCount,
		trigger_value_patterns = [ "/^[2-9]|\d{2:}$/" ],
		related_table = ca_collections,
		related_record = mi,
		relationship_type = part
	},
	2 = {
		source_tables = [ ca_objects ],
		trigger_template = ^ca_objects.individualCount,
		trigger_value_patterns = [ "/[^\d]/" ],
		related_table = ca_collections,
		related_record = xx,
		relationship_type = part
	}
}


#	0 = {
#		source_tables = [ ca_objects ],
#		trigger_template = ^ca_objects.type_id,
#		trigger_values = [ zoology, spider ],
#		related_table = ca_collections,
#		related_record = arachnida,
#		relationship_type = belongs_to
#	}
